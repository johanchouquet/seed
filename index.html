<html>
    <head>
        <title>WireMail Tutorial</title>
        <link rel="stylesheet" href="style.css" />
        <script src="lib/jquery/jquery.js"></script>
        <script>
        $(function(){
            $('pre.html').each(function(){
                var html = $(this).html();
                $(this).text(html);
            });
        });
        </script>
    </head>
    <body>
        <h1>Wire Mail Tutorial</h1>

        <h2>Contents</h2>
        <ul>
            <li><a href="#intro">wire.js - benefits</a></li>
            <li><a href="#step0">step 0 - get repo and install requirements</a></li>
            <li><a href="#step1">step 1 - start your environment</a></li>
        </ul>

        <h2 id="intro">wire.js - benefits: a structured environment for you app</h2>
        <table class="benefits">
            <tbody>
                <tr>
                    <td>
                        1 - Be Modular
                        <ul>
                            <li>Create the boxes in your systems diagram in one place</li>
                        </ul>
                    </td>
                    <td class="image"><img src="images/1-modular.png"></td>
                    <td>
                        <ul>
                            <li>No bootstrap!</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>
                        2 - Connect Your Modules
                        <ul>
                            <li>Draw the lines in your systems diagram</li>
                        </ul>
                    </td>
                    <td class="image"><img src="images/2-connect.png"></td>
                    <td>
                        <ul>
                            <li>No manual connection code!</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>
                        3 - Inject Their Dependencies
                        <ul>
                            <li>Inject dependent modules instead of having hard coded instatiation inside</li>
                        </ul>
                    </td>
                    <td class="image"><img src="images/3-inject.png"></td>
                    <td>
                        <ul>
                            <li>No manual dependency resolution!</li>
                            <li>More testable modules</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>
                        4 - Control Their Lifecycle
                        <ul>
                            <li>Control how the right things happen at the right time</li>
                        </ul>
                    </td>
                    <td class="image"><img src="images/4-lifecycle.png"></td>
                    <td>
                        <ul>
                            <li>Ensure each component is cleaned up</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>

        <h2 id="step0">step 0 - get repo and install requirements</h2>
        <p>
            For best results you'll want to fetch the tutorial so you can play along. We use git for source control. When you have git just clone this repo like so:
        </p>

        <pre>
    git clone git@github.com:gehan/seed.git
    git checkout wire
        </pre>

        <p>
            To run the webserver and install our libraries we use node.js. When you have node just go to the root of this repo and run this to download everything:
        </p>

        <pre>
    npm install
        </pre>

        <p>
            This will install a small webserver, our js package manager bower, and download all the libraries. To start the server run:
        </p>

        <pre>
    npm start
        </pre>

        <p>
            Point your browser (Chrome ideally) to http://localhost:8000/ and you should see this in the console
        </p>

        <pre>
    Spec loading OK! Context available as 'context'
        </pre>

        <p>
            After this you're all ready to go! Head to step 1 to get building this app!
        </p>

        <h2 id="step1">step 1 - your new environment!</h2>
        <p>
            An empty wire environment should be running. Let's quickly explain how this is happening before we move onto something more visible!
        </p>

        <h3>index.html - minimal shell for app</h3>

        <p>Your index.html looks quite small doesn't it? It now serves as a minimal shell to start up your app.</p>

        <pre class="html">
<!--
    <html>
        <head>
            <title>Seed App</title>
            <script src="/lib/curl/src/curl.js"></script>
            <script src="/app/run.js"></script>
        </head>
        <body>
        </body>
    </html>
-->
        </pre>

        <h3>run.js - configure your packages and start the app</h3>

        <p>Here we define any AMD packages we are going to use, and start up our wire spec!</p>

        <pre class="javascript">
    (function(curl){

        // Configure all our module paths
        var config = {
            paths: {
                'jquery': 'lib/jquery/jquery'
            },
            packages: [
                { name: 'curl', location: 'lib/curl/src/curl' },
                { name: 'wire', location: 'lib/wire', main: 'wire' },
                { name: 'meld', location: 'lib/meld', main: 'meld' },
                { name: 'when', location: 'lib/when', main: 'when' },
                { name: 'poly', location: 'lib/poly' }
            ]
        };

        // If our app starts correctly then log and make the context available
        var success = function (context) {
            console.log('Spec loading OK! Context available as \'context\'');
            window.context = context;
        };

        // If something goes wrong then we log that error
        var fail = function (error) {
            console.log('Error loading spec');
            console.error(error.stack);
        };

        // Start up the app! Runs our app/spec.js through wire. Curl is
        // promise-based so we can pass the result to our success/failure handlers
        curl(config, ['wire!app/spec']).then(success, fail);

    })(curl);
        </pre>

        <h3>spec.js - our wire environment</h3>

        <p>Finally - this is where the magic happens - the wire spec!</p>

        <pre class="javascript">
    define({

        hello: 'world'

    });
        </pre>

        <p>If you looked closely at the run.js you'll see that window.context has been set. If you type 'context.hello' in the console you should now get 'world'. We'll come onto what this means later</p>

        <p>For now our spec is looking a little tiny. Let's put something in it to show you what it can do - move to step 2!</p>

        <h2 id="step2">step 2 - start with a view</h2>
        <p>
            To show how wire.js works, let's load up some good old html and css for our Mail App. We'll start with a static template and make it dynamic later.
        </p>

        <p>New files:</p>
        <ul>
            <li><a href="https://github.com/gehan/seed/blob/wire-html/app/layout.html">app/layout.html</a></li>
            <li><a href="https://github.com/gehan/seed/blob/wire-html/app/layout.css">app/layout.css</a></li>
        </ul>

        <p>So how do we get these into the DOM without touching index.html?</p>

        <p>The concept we'd like to introduce to do is component factories</p>


    </body>
</html>
